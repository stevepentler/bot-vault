<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self' http://localhost:* http://127.0.0.1:*; media-src 'self';">
    <title>Bot Vault</title>
    <link rel="stylesheet" href="styles/fonts.css">
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/theme-dark.css">
    <link rel="stylesheet" href="styles/theme-jetski.css">
    <link rel="stylesheet" href="styles/theme-jetski-animations.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <script src="node_modules/marked/lib/marked.umd.js"></script>
    <script src="node_modules/dompurify/dist/purify.min.js"></script>
</head>
<body>
    <!-- Lightning Bolt Animation -->
    <div class="lightning-container" id="lightningContainer">
        <svg class="lightning-bolt bolt-1" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
            <path class="bolt-path" d="M 50 0 L 35 75 L 55 75 L 30 150 L 70 80 L 50 80 L 65 25 Z" />
        </svg>
        <svg class="lightning-bolt bolt-2" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
            <path class="bolt-path" d="M 50 0 L 35 75 L 55 75 L 30 150 L 70 80 L 50 80 L 65 25 Z" />
        </svg>
        <svg class="lightning-bolt bolt-3" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
            <path class="bolt-path" d="M 50 0 L 35 75 L 55 75 L 30 150 L 70 80 L 50 80 L 65 25 Z" />
        </svg>
        <svg class="lightning-bolt bolt-4" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
            <path class="bolt-path" d="M 50 0 L 35 75 L 55 75 L 30 150 L 70 80 L 50 80 L 65 25 Z" />
        </svg>
        <svg class="lightning-bolt bolt-5" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
            <path class="bolt-path" d="M 50 0 L 35 75 L 55 75 L 30 150 L 70 80 L 50 80 L 65 25 Z" />
        </svg>
        <svg class="lightning-bolt bolt-6" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
            <path class="bolt-path" d="M 50 0 L 35 75 L 55 75 L 30 150 L 70 80 L 50 80 L 65 25 Z" />
        </svg>
        <svg class="lightning-bolt bolt-7" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
            <path class="bolt-path" d="M 50 0 L 35 75 L 55 75 L 30 150 L 70 80 L 50 80 L 65 25 Z" />
        </svg>
        <svg class="lightning-bolt bolt-8" viewBox="0 0 100 200" xmlns="http://www.w3.org/2000/svg">
            <path class="bolt-path" d="M 50 0 L 35 75 L 55 75 L 30 150 L 70 80 L 50 80 L 65 25 Z" />
        </svg>
    </div>

    <div class="container">
        <header class="header">
            <h1>Bot Vault</h1>
            <div class="model-selector-container">
                <label for="modelSelect">Model:</label>
                <select id="modelSelect" class="model-select">
                    <option value="">Loading models...</option>
                </select>
            </div>
            <div class="theme-selector-container">
                <label for="themeSelect">Theme:</label>
                <select id="themeSelect" class="theme-select">
                    <option value="no-fun">No-Fun Mode</option>
                    <option value="dark" selected>Dark Mode</option>
                    <option value="jetski">⚡Jetski Mode⚡</option>
                </select>
            </div>
            <div class="stream-toggle-container">
                <label for="streamToggle">
                    <span>Stream responses</span>
                    <input type="checkbox" id="streamToggle" checked>
                </label>
            </div>
            <div class="stream-toggle-container temperature-container">
                <label for="temperatureSlider">
                    <span class="temp-label">Creativity</span>
                    <input type="range" id="temperatureSlider" min="0.1" max="0.7" step=".3" value="0.1">
                    <span class="temp-value" id="temperatureValue">Low</span>
                </label>
            </div>
            <button class="reset-btn" id="resetBtn" title="Clear conversation history">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="1 4 1 10 7 10"></polyline>
                    <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                </svg>
                Reset Chat
            </button>
        </header>

        <div class="chat-container" id="chatContainer">
            <img src="images/jetski.jpg" alt="Jetski" class="jetski-image" id="jetskiImage" style="display: none;">
            <img src="images/wave-race-64.jpg" alt="Wave Race 64" class="jetski-image" id="waveRaceImage" style="display: none;">
            <img src="images/manta-ray.png" alt="Manta Ray" class="manta-ray manta-ray-3" style="display: none;">
            <div class="welcome-message">
                <h2 class="welcome-title">Ask me anything!</h2>
                <p class="welcome-subtitle">My dad won't let me talk to the internet.</p>
            </div>
        </div>

        <div class="input-container">
            <div class="file-upload-area" id="fileUploadArea">
                <input type="file" id="fileInput" multiple hidden>
                <button class="file-upload-btn" id="fileUploadBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>
                    </svg>
                    Attach Files
                </button>
                
                <div class="file-list" id="fileList"></div>
                
                <div class="role-selector">
                    <label>
                        <input type="radio" name="role" value="user" checked>
                        <span class="role-label">User</span>
                    </label>
                    <label>
                        <input type="radio" name="role" value="assistant">
                        <span class="role-label">Assistant</span>
                    </label>
                    <label>
                        <input type="radio" name="role" value="system">
                        <span class="role-label">System</span>
                    </label>
                </div>
            </div>

            <div class="input-row">
                <textarea 
                    id="messageInput" 
                    placeholder="Type your message here..." 
                    rows="1"
                ></textarea>
                <button class="cancel-btn" id="cancelBtn" style="display: none;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
                        <rect x="6" y="6" width="12" height="12" rx="1"></rect>
                    </svg>
                </button>
                <button class="send-btn" id="sendBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Wave Race 64 Theme Music - Local File -->
    <audio id="jetskiAudio">
        <source src="music/WaveRaceMainTitle.mp3" type="audio/mpeg">
    </audio>

    <script type="module" src="script.js"></script>
</body>
</html>
